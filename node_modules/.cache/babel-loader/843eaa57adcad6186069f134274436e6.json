{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ira Kapllani\\\\Frontend\\\\src\\\\screens\\\\Login\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport { Textinput } from \"../../components/TextInput\";\nimport { BiEnvelope } from 'react-icons/bi';\nimport { Passwordinput } from \"../../components/PasswordInput\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Login(props) {\n  _s();\n\n  const {\n    setAppToken\n  } = props;\n  const navigate = useNavigate();\n\n  const emailIcon = /*#__PURE__*/_jsxDEV(BiEnvelope, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 22\n  }, this);\n\n  function submitLogin(event) {\n    event.preventDefault();\n    const form = event.currentTarget;\n    const mail = form.querySelector('input[type=\"text\"]');\n    const password = form.querySelector('input[placeholder=\"Password\"]');\n    const data = {};\n    data.email = mail.value;\n    data.password = password.value;\n    axios.post(\"http://localhost:3001/login\", {\n      email: mail.value,\n      password: password.value\n    }).then(res => {\n      if (res.status === 401) {\n        console.log('aaaaaa');\n        throw new Error('Validation failed.');\n      }\n\n      if (res.status !== 200 && res.status !== 201) {\n        throw new Error('Could not authenticate you!');\n      }\n\n      return res.data;\n    }).then(resData => {\n      console.log(resData);\n      localStorage.setItem(\"token\", resData.token);\n      localStorage.setItem(\"userId\", resData.userId);\n      setAppToken(resData.token);\n      navigate('/admin/books', {\n        replace: true\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-box\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submitLogin,\n        action: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Textinput, {\n          label: \"Email:\",\n          icon: emailIcon,\n          placeholder: \"E-mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Passwordinput, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-div\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"login-btn\",\n            type: \"submit\",\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Ira Kapllani/Frontend/src/screens/Login/index.jsx"],"names":["Textinput","BiEnvelope","Passwordinput","axios","useNavigate","Login","props","setAppToken","navigate","emailIcon","submitLogin","event","preventDefault","form","currentTarget","mail","querySelector","password","data","email","value","post","then","res","status","console","log","Error","resData","localStorage","setItem","token","userId","replace"],"mappings":"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","sourcesContent":["import { Textinput } from \"../../components/TextInput\";\r\nimport { BiEnvelope } from 'react-icons/bi'\r\nimport { Passwordinput } from \"../../components/PasswordInput\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport function Login(props) {\r\n  const { setAppToken } = props;\r\n  const navigate = useNavigate();\r\n  const emailIcon = (<BiEnvelope />);\r\n  function submitLogin(event) {\r\n    event.preventDefault();\r\n    const form = event.currentTarget;\r\n    const mail = form.querySelector('input[type=\"text\"]');\r\n    const password = form.querySelector('input[placeholder=\"Password\"]');\r\n    const data = {};\r\n    data.email = mail.value;\r\n    data.password = password.value;\r\n    axios.post(\"http://localhost:3001/login\", {\r\n      email: mail.value,\r\n      password: password.value\r\n    }).then(res => {\r\n      if (res.status === 401) {\r\n        console.log('aaaaaa');\r\n        throw new Error('Validation failed.');\r\n      }\r\n      if (res.status !== 200 && res.status !== 201) {\r\n        throw new Error('Could not authenticate you!');\r\n      }\r\n      return res.data;\r\n    }).then(resData => {\r\n      console.log(resData);\r\n      localStorage.setItem(\"token\", resData.token);\r\n      localStorage.setItem(\"userId\", resData.userId);\r\n      setAppToken(resData.token);\r\n      navigate('/admin/books', {replace: true});\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <div className=\"login-box\">\r\n        <form onSubmit={submitLogin} action=\"\">\r\n          <h1>Log in</h1>\r\n          <Textinput label=\"Email:\" icon={emailIcon} placeholder=\"E-mail\" />\r\n          <Passwordinput />\r\n          <div className=\"login-div\">\r\n          <button className=\"login-btn\" type=\"submit\">Log in</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}